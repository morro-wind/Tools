#!/bin/bash
LOGDIR=/tmp
BACKDIR=/tmp
PINGBIN=ping_log.sh

$PINGBIN restart

cd $LOGDIR
for LOG in `find . -type f -mtime +7`
do
    echo $LOG
    tar zcf $BACKDIR/`basename $LOG`.tgz $LOG
    [[ $? -eq 0 ]] && rm $LOG
done

cd $BACKDIR
find . -name *.tgz -mmin +15 -exec rm {} \;

